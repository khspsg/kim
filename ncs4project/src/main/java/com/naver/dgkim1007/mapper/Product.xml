<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.naver.dgkim1007.service.ProductDao">
	<resultMap type="com.naver.dgkim1007.entities.Product" id="ProductMap">
	</resultMap>
	
	<select id="codeConfirm" parameterType="String" resultType="int">
		select count(*) from Product where code=#{code}
	</select>
	<insert id="insertRow" parameterType="hashMap">
		insert into Product(code,name,capacity,explanation,
		buyprice,saleprice,preyystock,premmstock,preddstock,stock,
		buy01,buy02,buy03,buy04,buy05,buy06,buy07,buy08,buy09,buy10,buy11,buy12,
		sale01,sale02,sale03,sale04,sale05,sale06,sale07,sale08,sale09,sale10,sale11,sale12
		)values(
		#{code,jdbcType=VARCHAR},#{name,jdbcType=VARCHAR},#{capacity,jdbcType=VARCHAR},#{explanation,jdbcType=VARCHAR},
		#{buyprice,jdbcType=INTEGER},#{saleprice,jdbcType=INTEGER},#{preyystock,jdbcType=INTEGER},
		#{premmstock,jdbcType=INTEGER},#{preddstock,jdbcType=INTEGER},#{stock,jdbcType=INTEGER},
		#{buy01,jdbcType=INTEGER},#{buy02,jdbcType=INTEGER},#{buy03,jdbcType=INTEGER},#{buy04,jdbcType=INTEGER},
		#{buy05,jdbcType=INTEGER},#{buy06,jdbcType=INTEGER},#{buy07,jdbcType=INTEGER},#{buy08,jdbcType=INTEGER},
		#{buy09,jdbcType=INTEGER},#{buy10,jdbcType=INTEGER},#{buy11,jdbcType=INTEGER},#{buy12,jdbcType=INTEGER},
		#{sale01,jdbcType=INTEGER},#{sale02,jdbcType=INTEGER},#{sale03,jdbcType=INTEGER},#{sale04,jdbcType=INTEGER},
		#{sale05,jdbcType=INTEGER},#{sale06,jdbcType=INTEGER},#{sale07,jdbcType=INTEGER},#{sale08,jdbcType=INTEGER},
		#{sale09,jdbcType=INTEGER},#{sale10,jdbcType=INTEGER},#{sale11,jdbcType=INTEGER},#{sale12,jdbcType=INTEGER}
		)
	</insert>
	<select id="selectAll"  resultMap="ProductMap">
		select * from Product
	</select>
	
	<select id="selectOne" parameterType="String" resultMap="ProductMap">
		select * from Product where code=#{code}
	</select>
	<update id="updateRow" parameterType="hashMap">
		update Product set name=#{name},capacity=#{capacity},explanation=#{explanation},
		buyprice=#{buyprice},saleprice=#{saleprice},preyystock=#{preyystock},
		premmstock=#{premmstock},preddstock=#{preddstock},stock=#{stock},
		buy01=#{buy01},buy02=#{buy02},buy03=#{buy03},buy04=#{buy04},buy05=#{buy05},buy06=#{buy06},
		buy07=#{buy07},buy08=#{buy09},buy09=#{buy09},buy10=#{buy10},buy11=#{buy11},buy12=#{buy12},
		sale01=#{sale01},sale02=#{sale02},sale03=#{sale03},sale04=#{sale04},sale05=#{sale05},sale06=#{sale06},
		sale07=#{sale07},sale08=#{sale09},sale09=#{sale09},sale10=#{sale10},sale11=#{sale11},sale12=#{sale12}
		where code=#{code}
	</update>
	 
	<delete id="deleteRow"  parameterType="String">
		delete from Product where code=#{code}
	</delete>
	
	<update id="buyProductAdd" parameterType="HashMap">
		update product set stock = stock + #{qty},
		${procolumn} = ${procolumn} + #{qty}
		where code=#{procode}
	</update>
	
	<update id="buyProductStockSub" parameterType="HashMap">
		update product set stock = stock - #{beforeqty},
		${procolumn} = ${procolumn} - #{beforeqty}
		where code=#{beforeprocode}
	</update>
</mapper>